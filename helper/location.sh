#!/usr/local/bin/bash

set -x;
out=schools.txt
for school in a b c d e f g h i j k l m n o p q r s t u v w x y z; do

    curl "http://www.mlsli.com/Include/AJAX/MapSearch/GetLocations.aspx?q=${school}&limit=100&size=null&timestamp=1501253354922&type=School+District" -H 'Host: www.mlsli.com' -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:54.0) Gecko/20100101 Firefox/54.0' -H 'Accept: application/json, text/javascript, */*; q=0.01' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: http://www.mlsli.com/Listing/ListingSearch.aspx' -H 'X-Distil-Ajax: cdaxbaqbxs' -H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H 'X-Requested-With: XMLHttpRequest' -H 'Cookie: BrokerOffice_Session=SessionCookie=a67816d9-be96-4e7f-97e6-171bcb83980d; _ga=GA1.2.236589968.1498249286; D_SID=216.223.243.119:zIIXN1U5gPZ1JwZeyUN57bFUUhZceZZE+QypSPR+A3E; __utma=119517141.236589968.1498249286.1501170584.1501253258.12; __utmz=119517141.1501170584.11.2.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); ASP.NET_SessionId=nk1la3jahzxvwtz3a25lx4lk; ExternalReferrer=; rBW-ListingSearch=21a8d3df-61d2-4115-91da-10a9d216abe2; BrokerOffice_Visit=0=c456d055-8967-4b09-910a-f26951a60d28&1=1224-0-0-False; _gid=GA1.2.70223099.1500911588; MLSLI_tc=1; __utmc=119517141; D_IID=71FC3A37-EA91-3C28-A5EF-56E4DD48DB63; D_UID=DD4B35DB-2B93-33CF-9D6D-5968DA1BE8C5; D_ZID=11613518-1A4C-35B5-8007-6851AAE0565E; D_ZUID=2D72399B-3CF4-353F-8FAF-D7A875188928; D_HID=266E733E-0819-3C1D-8FCD-5A2885828201; rBW-CompareListings=3aa874e4-2930-4b6b-bf61-338b85cb09a5; .publicauth=; Sml-Login-Action=http%253A%252F%252Fwww.mlsli.com%252FListing%252FListingSearch.aspx%25253F%252526search%253D21a8d3df-61d2-4115-91da-10a9d216abe2%252526nextaction%253DSaveSearch; Sml-Original-Host=http%3A%2F%2Fwww.mlsli.com; Sml-Original-Path=%2FListing%2FListingSearch.aspx; rBW-IpLocation=%257b%2522IPAddressFrom%2522%253a%2522216.223.240.0%2522%252c%2522IPAddressTo%2522%253a%2522216.223.255.255%2522%252c%2522CountryCode%2522%253a%2522US%2522%252c%2522State%2522%253a%2522New%2BYork%2522%252c%2522City%2522%253a%2522Setauket-East%2BSetauket%2522%252c%2522Latitude%2522%253a40.9315%252c%2522Longitude%2522%253a-73.111%252c%2522Timezone%2522%253a%2522America%252fNew_York%2522%252c%2522Pin%2522%253a%257b%2522Lat%2522%253a40.93149948%252c%2522Lon%2522%253a-73.11100006%257d%257d; _ListingID=179656958; PrevSearchSection=ListingSearch; MLSLI_MobilePopup=1; __utmb=119517141.4.10.1501253258; __utmt=1; dmp-key=%2Fdc2%2F_T94%2Fbd9136fe-8cd0-4fd7-9dce-201cb0b5d98f_M-101164_333359' -H 'Connection: keep-alive' >> $out
    echo '' >> $out
    sleep 5
done
